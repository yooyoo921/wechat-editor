<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å…¬ä¼—å·æ’ç‰ˆåŠ©æ‰‹</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/juice/9.1.0/juice.min.js"></script>
    <style>
        .preview-scroll::-webkit-scrollbar { width: 4px; }
        .preview-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .iphone-border { border: 12px solid #1e293b; border-radius: 3rem; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="app" class="max-w-7xl mx-auto min-h-screen flex flex-col p-4 md:p-6">
        <header class="flex flex-col md:flex-row justify-between items-center mb-6 bg-white p-4 rounded-2xl shadow-sm border border-slate-200">
            <div class="mb-4 md:mb-0">
                <h1 class="text-2xl font-black text-green-600">ğŸ“ å…¬ä¼—å·ä¸€é”®æ’ç‰ˆ</h1>
            </div>
            <button @click="copyHtml" class="bg-green-600 hover:bg-green-700 text-white px-10 py-4 rounded-xl font-bold">å¤åˆ¶æ’ç‰ˆç»“æœ</button>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1">
            <div class="lg:col-span-5 space-y-6">
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                    <label class="block text-slate-500 font-bold mb-3">1. ç²˜è´´æ–‡ç« å†…å®¹</label>
                    <textarea v-model="input" @input="renderHtml" placeholder="åœ¨æ­¤ç²˜è´´æ–‡å­—..." 
                        class="w-full h-80 p-4 border-2 border-slate-100 rounded-xl focus:border-green-500 outline-none text-lg"></textarea>
                </div>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200 text-sm text-slate-500 italic">
                    æç¤ºï¼šä¿®æ”¹å·¦ä¾§æ–‡å­—ï¼Œå³ä¾§æ‰‹æœºæ¡†ä¼šå®æ—¶æ˜¾ç¤ºæ’ç‰ˆæ•ˆæœã€‚ [cite: 18]
                </div>
            </div>

            <div class="lg:col-span-7 flex justify-center bg-slate-200 rounded-3xl p-6 overflow-hidden">
                <div class="relative w-full max-w-[375px]">
                    <div class="iphone-border bg-white h-[700px] shadow-2xl overflow-hidden flex flex-col relative">
                        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-28 h-5 bg-slate-800 rounded-b-xl z-10"></div>
                        <div id="preview" class="preview-scroll flex-1 overflow-y-auto p-6 pt-10 bg-white" v-html="output"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;
        createApp({
            setup() {
                const input = ref('## æ¬¢è¿ä½¿ç”¨\nåœ¨è¿™é‡Œç²˜è´´ä½ çš„å†…å®¹ï¼Œå³è¾¹ä¼šå®æ—¶æ˜¾ç¤ºæ’ç‰ˆæ•ˆæœã€‚\n\n**åŠ ç²—æµ‹è¯•**ï¼Œè¿™æ˜¯æ­£æ–‡å†…å®¹ã€‚');
                const output = ref('');
                
                const renderHtml = () => {
                    try {
                        const rawHtml = marked.parse(input.value);
                        const css = `
                            h2 { color: #07c160; border-bottom: 2px solid #07c160; padding-bottom: 5px; margin-top: 20px; }
                            p { line-height: 1.8; margin-bottom: 15px; color: #333; }
                            strong { color: #07c160; }
                        `;
                        output.value = juice.inlineContent('<div>' + rawHtml + '</div>', css);
                    } catch (e) {
                        console.error('æ¸²æŸ“å‡ºé”™:', e);
                    }
                };

                const copyHtml = async () => {
                    try {
                        const el = document.getElementById('preview');
                        const blob = new Blob([el.innerHTML], { type: 'text/html' });
                        const data = [new ClipboardItem({ 'text/html': blob })];
                        await navigator.clipboard.write(data);
                        alert('âœ… å¤åˆ¶æˆåŠŸï¼è¯·å‰å¾€å…¬ä¼—å·åå°ç²˜è´´ã€‚');
                    } catch (err) {
                        alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·å°è¯•æ‰‹åŠ¨é€‰ä¸­å³ä¾§å†…å®¹å¤åˆ¶ã€‚');
                    }
                };

                onMounted(renderHtml);
                return { input, output, renderHtml, copyHtml };
            }
        }).mount('#app');
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å…¬ä¼—å·æ’ç‰ˆåŠ©æ‰‹ - æç®€ä¸“ä¸šç‰ˆ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/juice/9.1.0/juice.min.js"></script>
    <style>
        .preview-scroll::-webkit-scrollbar { width: 4px; }
        .preview-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .iphone-border { border: 12px solid #1e293b; border-radius: 3rem; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="app" class="max-w-7xl mx-auto min-h-screen flex flex-col p-4 md:p-6">
        
        <header class="flex flex-col md:flex-row justify-between items-center mb-6 bg-white p-4 rounded-2xl shadow-sm border border-slate-200">
            <div class="mb-4 md:mb-0">
                <h1 class="text-2xl font-black text-green-600 flex items-center">
                    <span class="mr-2">ğŸ“</span> å…¬ä¼—å·ä¸€é”®æ’ç‰ˆ
                </h1>
                <p class="text-slate-400 text-sm font-medium">é€‚åˆç”Ÿæ´»åˆ†äº«ã€è¡Œä¸šäº¤æµä¸å­¦æœ¯ç§‘æ™®</p>
            </div>
            <button @click="copyHtml" class="w-full md:w-auto bg-green-600 hover:bg-green-700 text-white px-10 py-4 rounded-xl font-bold shadow-lg transition-all active:scale-95 text-lg">
                å¤åˆ¶æ’ç‰ˆç»“æœ
            </button>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1">
            <div class="lg:col-span-5 space-y-6">
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                    <label class="block text-slate-500 font-bold mb-3">1. ç²˜è´´æ–‡ç« å†…å®¹</label>
                    <textarea v-model="input" @input="renderHtml" placeholder="åœ¨æ­¤è¾“å…¥æ–‡å­—..."
                        class="w-full h-64 p-4 border-2 border-slate-100 rounded-xl focus:border-green-500 outline-none text-lg leading-relaxed"></textarea>
                </div>

                <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                    <label class="block text-slate-500 font-bold mb-4">2. é€‰æ‹©é¢„è®¾é£æ ¼</label>
                    <div class="grid grid-cols-2 gap-3 mb-6">
                        <button v-for="(v, k) in themes" @click="setTheme(k)" 
                            :class="currentTheme === k ? 'border-green-500 bg-green-50 text-green-700' : 'border-slate-100 bg-slate-50'"
                            class="border-2 py-3 px-2 rounded-xl font-bold transition-all">
                            {{ v.name }}
                        </button>
                    </div>

                    <label class="block text-slate-500 font-bold mb-4">3. ç»†èŠ‚çµæ´»å¾®è°ƒ</label>
                    <div class="space-y-5">
                        <div class="flex items-center justify-between">
                            <span class="text-sm">å­—ä½“å¤§å° ({{ fontSize }}px)</span>
                            <input type="range" min="14" max="22" v-model="fontSize" @input="renderHtml" class="w-1/2 accent-green-600">
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm">ä¸»é¢˜é¢œè‰²</span>
                            <input type="color" v-model="brandColor" @input="renderHtml" class="h-10 w-1/2 cursor-pointer rounded">
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-7 flex justify-center bg-slate-200 rounded-3xl p-6 overflow-hidden">
                <div class="relative w-full max-w-[375px]">
                    <div class="iphone-border bg-white h-[700px] shadow-2xl overflow-hidden flex flex-col relative">
                        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-28 h-5 bg-slate-800 rounded-b-xl z-10"></div>
                        <div id="preview" class="preview-scroll flex-1 overflow-y-auto p-6 pt-10 bg-white" v-html="output"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;
        createApp({
            setup() {
                const input = ref('## æ¬¢è¿ä½¿ç”¨æ’ç‰ˆåŠ©æ‰‹\nåœ¨è¿™é‡Œç²˜è´´ä½ çš„è‰ç¨¿ï¼Œå³è¾¹ä¼šç«‹åˆ»æ˜¾ç¤ºç²¾ç¾æ ·å¼ã€‚\n\n**åŠ ç²—**çš„å†…å®¹ä¼šè‡ªåŠ¨è¯†åˆ«ä¸»é¢˜è‰²ã€‚\n\n> å¼•ç”¨å—éå¸¸é€‚åˆæ”¾åè¨€æˆ–è€…è¡¥å……è¯´æ˜ã€‚');
                const output = ref('');
                const currentTheme = ref('life');
                const fontSize = ref(17);
                const brandColor = ref('#f29100');

                const themes = {
                    life: { name: 'ğŸŒ» ç”Ÿæ´»åˆ†äº«', align: 'left', color: '#f29100' },
                    industry: { name: 'ğŸ“˜ è¡Œä¸šåŠ¨æ€', align: 'left', color: '#07c160' },
                    academic: { name: 'ğŸ›ï¸ ä¸¥è‚ƒç§‘æ™®', align: 'justify', color: '#003366' },
                    art: { name: 'ğŸ¨ æ–‡è‰ºç¾æ–‡', align: 'center', color: '#8e71c1' }
                };

                const renderHtml = () => {
                    const t = themes[currentTheme.value];
                    const rawHtml = marked.parse(input.value);
                    let css = `
                        div { font-size: ${fontSize.value}px; color: #333; line-height: 1.8; text-align: ${t.align}; }
                        h2 { color: ${brandColor.value}; margin: 25px 0 15px; font-weight: bold; }
                        strong { color: ${brandColor.value}; }
                        p { margin-bottom: 1.2em; }
                    `;

                    if(currentTheme.value === 'life') css += `h2 { border-bottom: 2px solid ${brandColor.value}; padding-bottom: 3px; } blockquote { background: #fdf6ec; border-left: 5px solid ${brandColor.value}; padding: 15px; }`;
                    if(currentTheme.value === 'industry') css += `h2 { border-left: 6px solid ${brandColor.value}; padding-left: 10px; background: #f0fdf4; padding: 5px 10px; }`;
                    if(currentTheme.value === 'academic') css += `h2 { text-align: center; font-size: 1.3em; } blockquote { border: 1px solid #eee; padding: 15px; font-style: italic; color: #666; }`;
                    if(currentTheme.value === 'art') css += `h2 { letter-spacing: 0.2em; font-weight: normal; } p { letter-spacing: 0.05em; }`;

                    output.value = juice.inlineContent(`<div>${rawHtml}</div>`, css);
                };

                const setTheme = (key) => {
                    currentTheme.value = key;
                    brandColor.value = themes[key].color;
                    renderHtml();
                };

                const copyHtml = async () => {
                    const el = document.getElementById('preview');
                    const blob = new Blob([el.innerHTML], { type: 'text/html' });
                    await navigator.clipboard.write([new ClipboardItem({ 'text/html': blob })]);
                    alert('âœ… å¤åˆ¶æˆåŠŸï¼\nè¯·æ‰“å¼€å…¬ä¼—å·åå°ç²˜è´´å³å¯ã€‚');
                };

                onMounted(() => setTheme('life'));
                return { input, output, currentTheme, fontSize, brandColor, themes, setTheme, renderHtml, copyHtml };
            }
        }).mount('#app');
    </script>
</body>
</html>
